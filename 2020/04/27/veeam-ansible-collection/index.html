<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Veeam Ansible Collection &middot; Chris Arceneaux</title>
        <meta name="description" content="Administer your Veeam environment Infrastructure as Code">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.95.0" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="Veeam Ansible Collection">
<meta property="og:description" content="Administer your Veeam environment Infrastructure as Code">
<meta property="og:type" content="article">
<meta property="og:url" content="https://test.arsano.ninja/2020/04/27/veeam-ansible-collection/">
        <link rel="stylesheet" href="https://test.arsano.ninja/dist/site.css">
        <link rel="stylesheet" href="https://test.arsano.ninja/dist/syntax.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        
        
        
        
        

    </head>
    <body>
        

        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a href="https://test.arsano.ninja/">A Journey in Automating the Datacenter</a>
                            </h1>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" aria-label="Twitter" href="https://twitter.com/chris_arceneaux" rel="me" >
                                <i class="fa fa-twitter" aria-hidden="true"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Gitlab" aria-label="Gitlab" href="https://gitlab.com/carceneaux" rel="me">
                                <i class="fa fa-gitlab" aria-hidden="true"></i>
                            </a>
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" aria-label="Github" href="https://github.com/carceneaux" rel="me">
                                <i class="fa fa-github-alt" aria-hidden="true"></i>
                            </a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="LinkedIn" aria-label="LinkedIn" href="https://linkedin.com/in/chris-arceneaux-8903047/" rel="me">
                                <i class="fa fa-linkedin" aria-hidden="true"></i>
                            </a>
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Email" aria-label="Send an Email" href="mailto:carcenea@gmail.com">
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                            </a>
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a href="/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a href="/page/about/">About</a>
    </li>

    <li class="site-nav-item">
        <a href="/tags/">Tags</a>
    </li>


                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Veeam Ansible Collection</h1>
    
        <p class="post-description" itemprop="description">Administer your Veeam environment Infrastructure as Code</p>
    
    <p class="post-date">
        <span>Published <time datetime="2020-04-27" itemprop="datePublished">Mon, Apr 27, 2020</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="https://test.arsano.ninja/page/about/" itemprop="url" rel="author">Chris Arceneaux</a>
            </span>
        </span>
    </p>
    
        <p class="post-reading post-line">
            <span>Estimated reading time: 3 min</span>
        </p>
    
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    <p>After completing my PowerShell script to <a href="https://github.com/VeeamHub/powershell/tree/master/BR-UpgradeV10">upgrade Veeam Backup &amp; Replication environments to v10</a>, I wanted to take the next step and automate the full lifecycle process. I&rsquo;ve had Ansible in my sights for a while to do this as it can natively use PowerShell.</p>
<p><a href="https://twitter.com/vMarkus_K">Markus Kraus</a>, a Veeam VanGaurd, started work along this same train of thought last year and recently updated the code to support <a href="https://mycloudrevolution.com/en/2020/02/05/veeam-availability-suite-10-unattended-installation/">Veeam Backup &amp; Replication v10</a>. As this was my first Ansible role to write, it was very helpful to use Markus&rsquo;s code as a base for my project.</p>
<h2 id="capabilities-of-this-release">Capabilities of this release</h2>
<ul>
<li>Automated <em>Install/Patch/Upgrade</em> operations for all products in the <a href="https://www.veeam.com/data-center-availability-suite.html">Veeam Availability Suite</a></li>
<li>Versions supported for <em>Install/Patch</em>:
<ul>
<li>9.5 Update 4</li>
<li>10</li>
</ul>
</li>
<li>Versions supported for <em>Upgrade</em>:
<ul>
<li>Upgrading to v10 from supported source versions</li>
</ul>
</li>
<li>Pre-requisite software is installed prior to <em>Install/Upgrade</em></li>
<li>Central location for all <em>Install/Patch/Upgrade</em> logs</li>
<li>Automated patching for <em>Install/Upgrade</em>
<ul>
<li>Checks for <em>Updates</em> folder in ISO and installs patches found</li>
</ul>
</li>
<li>Veeam Backup &amp; Replication
<ul>
<li>Configuration Backup is performed prior to <em>Patch/Upgrade</em></li>
<li>Cloud Connect environments are supported</li>
<li>Disables jobs prior to <em>Patch/Upgrade</em></li>
<li>Enables jobs after <em>Patch/Upgrade</em></li>
</ul>
</li>
<li>Veeam Backup Enterprise Manager
<ul>
<li>SQL DB Backup is performed prior to <em>Patch/Upgrade</em></li>
<li>Cloud Connect environments are supported</li>
</ul>
</li>
<li>Veeam ONE
<ul>
<li>SQL DB Backup is performed prior to <em>Patch/Upgrade</em></li>
<li><a href="https://helpcenter.veeam.com/docs/one/deployment/advanced_deployment.html?ver=100">Advanced Deployment</a> architecture supported</li>
</ul>
</li>
</ul>
<p>The source code for this project can be found in <a href="https://github.com/VeeamHub/veeam-ansible">VeeamHub</a>. Downloading &amp; using the code is super easy with the use of <a href="https://galaxy.ansible.com/veeamhub/veeam">Ansible Galaxy</a>.</p>
<p>If you&rsquo;ve never used Ansible previously, I recommend getting your feet wet with the <a href="https://docs.ansible.com/ansible/latest/network/getting_started/first_playbook.html">Ansible Getting Started Guide</a>. It does a really good job of explaining what Ansible is and how it works. The part I like most about Ansible is it doesn&rsquo;t require an agent to be installed on managed systems as it uses remote connection methods like SSH &amp; WinRM instead.</p>
<p>Ansible playbooks are used to execute complex instructions in a simplistic manner. Below is a sample playbook to install Veeam Backup &amp; Replication v10:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Veeam Backup &amp; Replication v10 Install</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">veeam</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">include_role</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">veeamhub.veeam.veeam_vas</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">tasks_from</span><span class="p">:</span><span class="w"> </span><span class="l">vbr_install</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">vars</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">iso_download</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">license</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">source_license</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/root/ansible/license.lic&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sql_install_username</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;sql_install&#34;</span><span class="w"> </span><span class="c">#used to install SQL Express (admin)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sql_install_password</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ChangeM3!&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sql_service_username</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;svc_sql&#34;</span><span class="w"> </span><span class="c">#used to run SQL Express (non-admin)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sql_service_password</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ChangeM3!&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sql_username</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;sa&#34;</span><span class="w"> </span><span class="c">#used by Veeam to connect to SQL Express</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">sql_password</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ChangeM3!&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># https://docs.ansible.com/ansible/latest/user_guide/playbooks_vault.html#single-encrypted-variable</span><span class="w">
</span></span></span></code></pre></div><p>Included with the documentation on VeeamHub, I&rsquo;ve provided plenty of <a href="https://github.com/VeeamHub/veeam-ansible/tree/master/roles/veeam_vas#example-playbooks">sample playbooks</a>.</p>
<p><img src="https://test.arsano.ninja/images/ansible-vbr-install.png" alt="Ansible VBR 10 Install"></p>
<h2 id="contributing">Contributing</h2>
<p>If you&rsquo;d like to support this community project, I welcome contributions from the community. For more information, feel free to reference the <a href="https://github.com/VeeamHub/veeam-ansible/blob/master/CONTRIBUTING.md">project contributing guide</a>.</p>
<h2 id="next-steps">Next Steps</h2>
<p>I&rsquo;m currently working on feature enhancements for this Ansible collection. Currently, I have in mind to add support for performing basic Veeam Backup &amp; Replication configuration tasks:</p>
<ul>
<li>Configuration Backup settings</li>
<li>Add/Remove Veeam Managed Servers</li>
<li>Add/Remove Veeam Backup Proxy</li>
<li>Add/Remove Veeam Backup Repository</li>
<li>Add/Remove VMware vCenter</li>
<li>Add/Remove VMware vCloud Director</li>
<li>More to come!</li>
</ul>
<p>If you have any questions/problems/feature requests about this Ansible collection, please use the projects <a href="https://github.com/VeeamHub/veeam-ansible/issues/new/choose">GitHub Issue Tracker</a>.</p>

</div>

        <footer class="post-footer clearfix">
        <p class="post-tags">
            <span>Tagged:</span>
                <a href="/tags/veeam/">veeam</a>, 
                <a href="/tags/ansible/">ansible</a>, 
                <a href="/tags/collection/">collection</a>, 
                <a href="/tags/role/">role</a>, 
                <a href="/tags/automation/">automation</a>, 
                <a href="/tags/vbr/">vbr</a>, 
                <a href="/tags/em/">em</a>, 
                <a href="/tags/one/">one</a>
        </p>
    <div class="share">
            <a class="icon-twitter" href="https://twitter.com/share?text=Veeam%20Ansible%20Collection&url=https%3a%2f%2ftest.arsano.ninja%2f2020%2f04%2f27%2fveeam-ansible-collection%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" aria-label="Share on Twitter">
                <i class="fa fa-twitter" aria-hidden="true"></i>
            </a>
            <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&title=Veeam%20Ansible%20Collection&url=https%3a%2f%2ftest.arsano.ninja%2f2020%2f04%2f27%2fveeam-ansible-collection%2f&summary=Administer%20your%20Veeam%20environment%20Infrastructure%20as%20Code"
               onclick="window.open(this.href, 'linkedin-share', 'width=554,height=481');return false;" aria-label="Share on LinkedIn">
               <i class="fa fa-linkedin" aria-hidden="true"></i>
            </a>
    </div>
</footer>

        
    <div class="comments">
        
    </div>

    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a href="https://test.arsano.ninja/">A Journey in Automating the Datacenter</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#" aria-label="Back to Top">
                        <i class="fa fa-angle-up" aria-hidden="true"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2022 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
            </div>
        </footer>

        <script src="https://test.arsano.ninja/js/jquery-1.11.3.min.js"></script>
        <script src="https://test.arsano.ninja/js/jquery.fitvids.js"></script>
        <script src="https://test.arsano.ninja/js/scripts.js"></script>
        
    </body>
</html>

